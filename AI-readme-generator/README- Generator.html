<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mythic Builder Portal - README Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the retro-terminal aesthetic */
        body {
            font-family: 'Inter', monospace;
            background-color: #0d0d0d;
            color: #00ff00;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

Â  Â  Â  Â  .container {
    max-width: 90%;
    width: 100%;
    padding: 2rem;
    border: 2px solid #ffcc00;
    box-shadow: 0 0 15px #00ff00, 0 0 25px #ffcc00;
    border-radius: 12px;
    background-color: rgba(13, 13, 13, 0.9);
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

h1 {
    color: #ffcc00;
    text-shadow: 0 0 5px #ffcc00;
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    text-align: center;
}

.chat-window {
    height: 400px;
    overflow-y: auto;
    border: 1px solid #00ffff;
    border-radius: 8px;
    padding: 1rem;
    background-color: #1a1a1a;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.chat-message {
    padding: 0.75rem 1rem;
    border-radius: 10px;
    max-width: 80%;
    word-wrap: break-word;
    animation: neon-flicker 1.5s infinite alternate ease-in-out;
}

@keyframes neon-flicker {
    from { text-shadow: 0 0 2px #00ff00, 0 0 5px #00ff00; }
    to { text-shadow: 0 0 4px #00ff00, 0 0 8px #00ff00, 0 0 12px #00ff00; }
}

.user-message {
    background-color: #00ffff;
    color: #0d0d0d;
    align-self: flex-end;
    text-align: right;
}

.ai-message {
    background-color: #ffcc00;
    color: #0d0d0d;
    align-self: flex-start;
    text-align: left;
}

.input-area {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

input[type="text"] {
    flex-grow: 1;
    padding: 0.75rem;
    background-color: #1a1a1a;
    border: 1px solid #00ffff;
    color: #00ff00;
    border-radius: 8px;
    outline: none;
    box-shadow: inset 0 0 5px rgba(0, 255, 255, 0.5);
}

button {
    background-color: #00ff00;
    color: #0d0d0d;
    padding: 0.75rem 1.5rem;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 10px #00ff00;
    border: none;
}

button:hover {
    background-color: #ffcc00;
    color: #0d0d0d;
    box-shadow: 0 0 15px #ffcc00;
    transform: translateY(-2px);
}

#loading-indicator {
    text-align: center;
    color: #00ffff;
    margin-top: 1rem;
    font-style: italic;
}

#generated-readme-container {
    background-color: #1a1a1a;
    border: 1px solid #ffcc00;
    padding: 1.5rem;
    margin-top: 1rem;
    border-radius: 8px;
    box-shadow: 0 0 10px #ffcc00;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 500px;
    overflow-y: auto;
    color: #00ff00;
}

#copy-button, #download-button {
    background-color: #00ffff;
    color: #0d0d0d;
    box-shadow: 0 0 10px #00ffff;
    width: 100%;
    margin-top: 1rem;
}

#copy-button:hover, #download-button:hover {
    background-color: #00ff00;
    box-shadow: 0 0 15px #00ff00;
}

/* Styles for new buttons */
#back-button, #redo-button {
    background-color: #663399;
    color: #fff;
    box-shadow: 0 0 10px #663399;
}

#back-button:hover, #redo-button:hover {
    background-color: #8A2BE2;
    box-shadow: 0 0 15px #8A2BE2;
}

/* Progress Ritual styles */
#progress-ritual {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(0, 255, 255, 0.2);
}

.sigil {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: #2a2a2a;
    transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
}

.sigil.active {
    background-color: #00ff00;
    box-shadow: 0 0 5px #00ff00, 0 0 10px #00ff00;
}

.logo-container {
    text-align: center;
    margin-bottom: 1rem;
}

.logo-container img {
    max-width: 100%;
    height: auto;
}

/* Responsive adjustments */
@media (min-width: 640px) {
    .container {
        max-width: 700px;
    }
    .input-area button {
        width: auto;
    }
    .input-area {
        flex-wrap: nowrap;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <h1>Mythic Builder Portal // README Generator</h1>

        <div class="chat-window" id="chat-window">
            <div id="progress-ritual"></div>
        </div>

        <div class="input-area">
            <button id="back-button" disabled>Back</button>
            <input type="text" id="user-input" placeholder="Type your answer here..." autofocus>
            <button id="send-button">Send</button>
            <button id="redo-button">Redo</button>
        </div>

        <div id="loading-indicator" class="hidden">Generating README...</div>

        <div id="generated-readme-container" class="hidden">
            <h2 class="text-xl font-bold text-gold mb-4">Generated README:</h2>
            <pre id="generated-readme-content" class="text-neon-green"></pre>
            <button id="copy-button">Copy to Clipboard</button>
            <button id="download-button">â¬‡ï¸ Download README.md</button>
        </div>
    </div>

    <script type="module">
        // Global variables for Canvas environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // UI Elements
        const chatWindow = document.getElementById('chat-window');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const backButton = document.getElementById('back-button');
        const redoButton = document.getElementById('redo-button');
        const loadingIndicator = document.getElementById('loading-indicator');
        const generatedReadmeContainer = document.getElementById('generated-readme-container');
        const generatedReadmeContent = document.getElementById('generated-readme-content');
        const copyButton = document.getElementById('copy-button');
        const downloadButton = document.getElementById('download-button');
        const progressRitual = document.getElementById('progress-ritual');

Â  Â  Â  Â  // Conversation state
Â  Â  Â  Â  const conversationQuestions = [
Â  Â  Â  Â  Â  Â  { key: 'githubUsername', prompt: 'What is your **GitHub username**? (This will be used in links to your repository)' },
Â  Â  Â  Â  Â  Â  { key: 'githubRepoName', prompt: 'What is the **exact name of your GitHub repository** for this project? (e.g., "battleships", "my-awesome-project")' },
Â  Â  Â  Â  Â  Â  { key: 'projectTitle', prompt: 'What is the **title** of your project?' },
Â  Â  Â  Â  Â  Â  { key: 'projectStatus', prompt: 'What is the current **status** of your project? (e.g., Operational, In Development, Alpha, Beta)' },
Â  Â  Â  Â  Â  Â  { key: 'projectDescription', prompt: 'Please provide a brief **description** of your project. What is its purpose and what are its key features?' },
Â  Â  Â  Â  Â  Â  { key: 'brandKeywords', prompt: 'Are there any specific **keywords, themes, or aesthetic elements** (e.g., "Praximous", "retro-terminal", "neon-gold-void", "Modularity is Mythos") you\'d like to emphasize in the README?' },
Â  Â  Â  Â  Â  Â  { key: 'programmingLanguage', prompt: 'What is the **primary programming language** or technology stack used in this project? (e.g., "Python", "JavaScript", "C++"). *Only the first language mentioned will be used for the badge.*' },
Â  Â  Â  Â  Â  Â  { key: 'operatingSystem', prompt: 'What **operating system(s)** is this project designed for or primarily compatible with? (e.g., Windows, macOS, Linux, cross-platform)' },
Â  Â  Â  Â  Â  Â  { key: 'developmentTools', prompt: 'Are there any specific **development tools, IDEs, or build systems** recommended for working with or contributing to this project? (e.g., VS Code, Docker, npm, Maven)' },
Â  Â  Â  Â  Â  Â  { key: 'projectStructure', prompt: 'Can you describe the **main directories and files** in your project\'s structure, and their purpose? (e.g., "src/game.py: core logic", "assets/images: game sprites")' },
Â  Â  Â  Â  Â  Â  { key: 'installationSteps', prompt: 'How can users **install and set up** your project? Provide detailed, step-by-step instructions with commands.' },
Â  Â  Â  Â  Â  Â  { key: 'usageInstructions', prompt: 'How do users **use** your project? Provide clear instructions, including controls and examples.' },
Â  Â  Â  Â  Â  Â  { key: 'contributingGuidelines', prompt: 'Are there any **guidelines for contributing** to your project? (e.g., how to submit bug reports, feature requests, or if contributions are not accepted yet)' },
Â  Â  Â  Â  Â  Â  { key: 'licenseInfo', prompt: 'What **license** does your project use? (e.g., MIT License, Apache 2.0)' },
Â  Â  Â  Â  Â  Â  { key: 'additionalInfo', prompt: 'Is there anything else you\'d like to add or emphasize in the README before I generate it?' }
Â  Â  Â  Â  ];
Â  Â  Â  Â  let currentQuestionIndex = 0;
Â  Â  Â  Â  let collectedAnswers = {};
Â  Â  Â  Â  let isGenerating = false; // Flag to prevent multiple generations

Â  Â  Â  Â  // Function to show a custom message box (instead of alert)
Â  Â  Â  Â  function showMessageBox(message) {
Â  Â  Â  Â  Â  Â  const messageBox = document.createElement('div');
Â  Â  Â  Â  Â  Â  messageBox.style.cssText = `
Â  Â  Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%);
Â  Â  Â  Â  Â  Â  Â  Â  background-color: #1a1a1a;
Â  Â  Â  Â  Â  Â  Â  Â  border: 2px solid #ffcc00;
Â  Â  Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px #00ff00;
Â  Â  Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  Â  Â  color: #00ff00;
Â  Â  Â  Â  Â  Â  Â  Â  font-family: 'Inter', monospace;
Â  Â  Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  messageBox.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <p>${message}</p>
Â  Â  Â  Â  Â  Â  Â  Â  <button style="
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  background-color: #00ffff;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  color: #0d0d0d;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  padding: 8px 15px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  Â  Â  " onclick="this.parentNode.remove()">OK</button>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  document.body.appendChild(messageBox);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to add a message to the chat window
Â  Â  Â  Â  function addMessageToChat(message, sender, questionIndex) {
Â  Â  Â  Â  Â  Â  const messageElement = document.createElement('div');
Â  Â  Â  Â  Â  Â  messageElement.classList.add('chat-message');
Â  Â  Â  Â  Â  Â  messageElement.setAttribute('data-question-index', questionIndex);
Â  Â  Â  Â  Â  Â  if (sender === 'user') {
Â  Â  Â  Â  Â  Â  Â  Â  messageElement.classList.add('user-message');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  messageElement.classList.add('ai-message');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  messageElement.innerHTML = message; // Use innerHTML to render bold text
Â  Â  Â  Â  Â  Â  chatWindow.appendChild(messageElement);
Â  Â  Â  Â  Â  Â  chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to bottom
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to ask the next question
Â  Â  Â  Â  function askNextQuestion() {
Â  Â  Â  Â  Â  Â  if (currentQuestionIndex < conversationQuestions.length) {
Â  Â  Â  Â  Â  Â  Â  Â  const question = conversationQuestions[currentQuestionIndex].prompt;
Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat(question, 'ai', currentQuestionIndex);
Â  Â  Â  Â  Â  Â  Â  Â  updateProgressRitual(currentQuestionIndex);
Â  Â  Â  Â  Â  Â  Â  Â  updateButtonStates();
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // All questions asked, time to generate README
Â  Â  Â  Â  Â  Â  Â  Â  generateReadmeFromAnswers();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to update button enabled/disabled states
Â  Â  Â  Â  function updateButtonStates() {
Â  Â  Â  Â  Â  Â  backButton.disabled = currentQuestionIndex <= 0 || isGenerating;
Â  Â  Â  Â  Â  Â  sendButton.disabled = isGenerating;
Â  Â  Â  Â  Â  Â  userInput.disabled = isGenerating;
Â  Â  Â  Â  Â  Â  redoButton.disabled = isGenerating;
Â  Â  Â  Â  Â  Â  // Disable download/copy buttons if README not yet generated
Â  Â  Â  Â  Â  Â  const readmeGenerated = generatedReadmeContent.textContent.length > 0;
Â  Â  Â  Â  Â  Â  copyButton.disabled = !readmeGenerated;
Â  Â  Â  Â  Â  Â  downloadButton.disabled = !readmeGenerated;
Â  Â  Â  Â  }

Â  Â  Â  Â  // NEW: Function to update the progress ritual display
Â  Â  Â  Â  function updateProgressRitual(index) {
Â  Â  Â  Â  Â  Â  const sigils = progressRitual.children;
Â  Â  Â  Â  Â  Â  // Deactivate all sigils beyond the current index
Â  Â  Â  Â  Â  Â  for (let i = index; i < sigils.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  sigils[i].classList.remove('active');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  // Activate the current sigil
Â  Â  Â  Â  Â  Â  if (index > 0 && index <= sigils.length) {
Â  Â  Â  Â  Â  Â  Â  Â  sigils[index - 1].classList.add('active');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Exponential backoff for API retries
Â  Â  Â  Â  async function fetchWithExponentialBackoff(url, options, retries = 5, delay = 1000) {
Â  Â  Â  Â  Â  Â  for (let i = 0; i < retries; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(url, options);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return response;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else if (response.status === 429 || response.status >= 500) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Too Many Requests or Server Error, retry
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.warn(`API call failed with status ${response.status}. Retrying in ${delay / 1000}s...`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat(`A temporal distortion was detected. Retrying the ritual in ${delay / 1000}s...`, 'ai');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await new Promise(resolve => setTimeout(resolve, delay));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  delay *= 2; // Exponential increase
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Other client-side errors, don't retry
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`API error: ${response.status} - ${errorData.message || response.statusText}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (i === retries - 1) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw error; // Re-throw if it's the last retry
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error(`Fetch attempt failed: ${error.message}. Retrying...`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("The portal connection is unstable. Attempting to re-establish the link...", 'ai');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  await new Promise(resolve => setTimeout(resolve, delay));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  delay *= 2; // Exponential increase
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  throw new Error('Max retries exceeded for API call.');
Â  Â  Â  Â  }

Â  Â  Â  Â  async function generateGlyphLogo() {
Â  Â  Â  Â  Â  Â  const apiKey = "YOUR_GEMINI_API_KEY_HERE";
Â  Â  Â  Â  Â  Â  const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

Â  Â  Â  Â  Â  Â  const projectTitle = collectedAnswers.projectTitle || 'Project Glyph';
Â  Â  Â  Â  Â  Â  const projectDescription = collectedAnswers.projectDescription || 'A digital creation.';
Â  Â  Â  Â  Â  Â  const brandKeywords = collectedAnswers.brandKeywords || 'retro-bright, neon, glyph, portal';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const prompt = `A retro-bright neon glyph game logo for '${projectTitle}' with a style that evokes '${brandKeywords}'. It should be a vector-style illustration of a game character or icon based on the description: '${projectDescription}'. The design should be clean and suitable as a game logo, with a black background.`;

Â  Â  Â  Â  Â  Â  const payload = {
Â  Â  Â  Â  Â  Â  Â  Â  contents: [{ role: "user", parts: [{ text: prompt }] }],
Â  Â  Â  Â  Â  Â  Â  Â  "generationConfig": {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  "responseMimeType": "image/jpeg"
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const response = await fetchWithExponentialBackoff(apiUrl, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(payload)
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const blob = await response.blob();
Â  Â  Â  Â  Â  Â  Â  Â  const imageURL = URL.createObjectURL(blob);
Â  Â  Â  Â  Â  Â  Â  Â  return imageURL;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error("Failed to generate logo image.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to generate README using Gemini API from collected answers
Â  Â  Â  Â  async function generateReadmeFromAnswers() {
Â  Â  Â  Â  Â  Â  if (isGenerating) return; // Prevent duplicate calls
Â  Â  Â  Â  Â  Â  isGenerating = true;
Â  Â  Â  Â  Â  Â  updateButtonStates(); // Disable buttons during generation

Â  Â  Â  Â  Â  Â  addMessageToChat("Thank you! I have all the information. Please wait while I generate your README...", 'ai', conversationQuestions.length);
Â  Â  Â  Â  Â  Â  loadingIndicator.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  generatedReadmeContainer.classList.add('hidden');
Â  Â  Â  Â  Â  Â  generatedReadmeContent.textContent = '';
            
            let generatedLogoUrl = "https://user-images.githubusercontent.com/97833075/274483753-43c3f2d2-8a9d-472e-8360-1e2474f3ff5e.png";
            try {
                addMessageToChat("Manifesting your custom project glyph...", 'ai', -1);
                generatedLogoUrl = await generateGlyphLogo();
            } catch (error) {
                addMessageToChat("A glitch in the void prevented the custom glyph from manifesting. A default artifact will be used instead.", 'ai', -1);
                console.error("Error generating custom logo:", error);
            }
            
Â  Â  Â  Â  Â  Â  // Define the static J.T.G Praximous ASCII art
Â  Â  Â  Â  Â  Â  const jtgPraximousAsciiArt = `
<pre>
Â  â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•—â–‘â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘
Â  â–ˆâ–ˆâ•”â•â•â•â•â•â–‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
Â  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
Â  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–‘â–‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–‘â–‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
Â  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•‘
Â  â•šâ•â•â•â•â•â•â–‘â–‘â•šâ•â•â–‘â–‘â•šâ•â•â•šâ•â•â–‘â–‘â•šâ•â•â•šâ•â•â–‘â–‘â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â–‘â–‘â•šâ•â•â–‘â•šâ•â•â•â•â•â•â–‘â•šâ•â•â•â•â•â•â•â•šâ•â•â–‘â–‘â•šâ•â•
</pre>
<h1 style="color:#FFD700;">// Mythic Builder Portal //</h1>
<h2 style="color:#FF69B4;">// A Praximous Glyphic Ritual //</h2>
`;

Â  Â  Â  Â  Â  Â  const footerAsciiArt = `
<pre>
Â  Â  â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„
Â  Â  â–Œ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â–
Â  Â  â–Œ <span style="color:#00FFFF;">PRAXIMOUS</span> <span style="color:#FFD700;">BUILDER</span> <span style="color:#FF6100;">PORTAL</span> Â // Â <span style="color:#00FFFF;">CRAFTED</span> <span style="color:#FFD700;">IN</span> <span style="color:#FF6100;">THE</span> <span style="color:#00FFFF;">VOID</span> // <span style="color:#FFD700;">EMBRACE</span> <span style="color:#FF6100;">THE</span> <span style="color:#00FFFF;">RETRO</span> <span style="color:#FFD700;">FUTURE</span> Â â–
Â  Â  â–Œ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â–
Â  Â  â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„â–€â–„
</pre>
`;

Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // Determine badge colors and logos based on input
Â  Â  Â  Â  Â  Â  Â  Â  const projectStatusLower = collectedAnswers.projectStatus.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  let projectStatusColor = 'informational';
Â  Â  Â  Â  Â  Â  Â  Â  if (projectStatusLower.includes('operational')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  projectStatusColor = 'brightgreen';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (projectStatusLower.includes('development') || projectStatusLower.includes('in development')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  projectStatusColor = 'orange';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (projectStatusLower.includes('beta')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  projectStatusColor = 'blue';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (projectStatusLower.includes('alpha')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  projectStatusColor = 'red';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // Process programming language for badge
Â  Â  Â  Â  Â  Â  Â  Â  const rawLanguageInput = collectedAnswers.programmingLanguage || '';
Â  Â  Â  Â  Â  Â  Â  Â  const primaryLanguageForBadge = rawLanguageInput.split(',')[0].trim(); // Take only the first language for the badge text
Â  Â  Â  Â  Â  Â  Â  Â  const primaryLanguageLower = primaryLanguageForBadge.toLowerCase();

Â  Â  Â  Â  Â  Â  Â  Â  let languageColor = 'informational';
Â  Â  Â  Â  Â  Â  Â  Â  let languageLogo = 'github'; // Default generic logo if not found
Â  Â  Â  Â  Â  Â  Â  Â  if (primaryLanguageLower.includes('python')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageColor = 'blue';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageLogo = 'python';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (primaryLanguageLower.includes('javascript') || primaryLanguageLower.includes('js')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageColor = 'yellow';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageLogo = 'javascript';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (primaryLanguageLower.includes('java')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageColor = 'red';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageLogo = 'java';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (primaryLanguageLower.includes('html') || primaryLanguageLower.includes('css')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageColor = 'orange';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  languageLogo = 'html5';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  // Add more language color/logo mappings as needed

Â  Â  Â  Â  Â  Â  Â  Â  const osLower = collectedAnswers.operatingSystem.toLowerCase();
Â  Â  Â  Â  Â  Â  Â  Â  let osColor = 'informational';
Â  Â  Â  Â  Â  Â  Â  Â  let osLogo = 'windows'; // Default logo
Â  Â  Â  Â  Â  Â  Â  Â  if (osLower.includes('windows')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  osColor = '0078D4';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  osLogo = 'windows';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (osLower.includes('macos') || osLower.includes('mac os')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  osColor = '000000';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  osLogo = 'apple';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (osLower.includes('linux')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  osColor = 'FCC624';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  osLogo = 'linux';
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  // Add more OS color/logo mappings as needed

Â  Â  Â  Â  Â  Â  Â  Â  const githubUsername = collectedAnswers.githubUsername || 'your-username';
Â  Â  Â  Â  Â  Â  Â  Â  const githubRepoName = collectedAnswers.githubRepoName || collectedAnswers.projectTitle.toLowerCase().replace(/\s/g, '-') || 'project';

Â  Â  Â  Â  Â  Â  Â  Â  // Construct the static header part with dynamic badges
Â  Â  Â  Â  Â  Â  Â  Â  const headerMarkdown = `
<div align="center">
Â  Â  <img src="${generatedLogoUrl}" alt="Generated Project Glyph" style="max-width: 250px; height: auto;">
Â  Â  <br>
Â  Â  ${jtgPraximousAsciiArt}
Â  Â  <img src="https://user-images.githubusercontent.com/97833075/274483753-43c3f2d2-8a9d-472e-8360-1e2474f3ff5e.png" alt="Neon Grid Horizon">
Â  Â  <br>
Â  Â  <br>
Â  Â  <p align="center">
Â  Â  Â  Â  <a href="https://github.com/${githubUsername}/${githubRepoName}">
Â  Â  Â  Â  Â  Â  <img src="https://img.shields.io/badge/Project%20Status-${encodeURIComponent(collectedAnswers.projectStatus)}-${projectStatusColor}?style=for-the-badge&logo=appveyor&logoColor=white" alt="Project Status">
Â  Â  Â  Â  </a>
Â  Â  Â  Â  <a href="https://github.com/${githubUsername}/${githubRepoName}">
Â  Â  Â  Â  Â  Â  <img src="https://img.shields.io/badge/Language-${encodeURIComponent(primaryLanguageForBadge)}-${languageColor}?style=for-the-badge&logo=${languageLogo}&logoColor=white" alt="Language">
Â  Â  Â  Â  </a>
Â  Â  Â  Â  <a href="https://github.com/${githubUsername}/${githubRepoName}">
Â  Â  Â  Â  Â  Â  <img src="https://img.shields.io/badge/OS%20Compatibility-${encodeURIComponent(collectedAnswers.operatingSystem)}-${osColor}?style=for-the-badge&logo=${osLogo}&logoColor=white" alt="OS Compatibility">
Â  Â  Â  Â  </a>
Â  Â  </p>
Â  Â  <br>
Â  Â  <p align="center">
Â  Â  Â  Â  <samp><b>MODULARITY IS MYTHOS // GLYPH IS IDENTITY // DESIGN IS RITUAL.</b></samp>
Â  Â  </p>
</div>

---

## ğŸ“œ Praximous Codex // Table of Contents

* [1. Project Overwrite // Glyph Genesis](#1-project-overwrite--glyph-genesis)
* [2. Architect's Mandate // Core Configuration](#2-architects-mandate--core-configuration)
* [3. Ritual of Summoning // Installation Protocol](#3-ritual-of-summoning--installation-protocol)
* [4. Ignition Sequence // Operational Rites](#4-ignition-sequence--operational-rites)
* [5. Codex of Structure // Praximous Manifest](#5-codex-of-structure--praximous-manifest)
* [6. The Conclave of Builders // Contribution Protocol](#6-the-conclave-of-builders--contribution-protocol)
* [7. Oathbound Accords // Licensing Mandate](#7-oathbound-accords--licensing-mandate)

---
`;

Â  Â  Â  Â  Â  Â  Â  Â  const footerMarkdown = `
---

<div align="center">
Â  Â  ${footerAsciiArt}
Â  Â  <img src="https://user-images.githubusercontent.com/97833075/274483753-43c3f2d2-8a9d-472e-8360-1e2474f3ff5e.png" alt="Neon Grid Horizon">
Â  Â  <br>
Â  Â  <p align="center">
Â  Â  Â  Â  <a href="https://github.com/${githubUsername}/${githubRepoName}">
Â  Â  Â  Â  Â  Â  <img src="https://img.shields.io/badge/Built%20With-${encodeURIComponent(primaryLanguageForBadge)}-${languageColor}?style=for-the-badge&logo=${languageLogo}&logoColor=white" alt="Built With Python">
Â  Â  Â  Â  </a>
Â  Â  Â  Â  <a href="https://github.com/${githubUsername}/${githubRepoName}/blob/main/LICENSE">
Â  Â  Â  Â  Â  Â  <img src="https://img.shields.io/badge/License-${encodeURIComponent(collectedAnswers.licenseInfo)}-FFD700?style=for-the-badge&logo=open-source-initiative&logoColor=white" alt="MIT License">
Â  Â  Â  Â  </a>
Â  Â  Â  Â  <a href="https://github.com/${githubUsername}/${githubRepoName}/stargazers">
Â  Â  Â  Â  Â  Â  <img src="https://img.shields.io/github/stars/${githubUsername}/${githubRepoName}?style=for-the-badge&logo=github&logoColor=white&color=0078D4" alt="GitHub Stars">
Â  Â  Â  Â  </a>
Â  Â  </p>
Â  Â  <br>
Â  Â  <p align="center">
Â  Â  Â  Â  <samp><b>MODULARITY IS MYTHOS // GLYPH IS IDENTITY // DESIGN IS RITUAL.</b></samp>
Â  Â  </p>
</div>
`;

Â  Â  Â  Â  Â  Â  Â  Â  let prompt = `Generate the *content only* for a comprehensive, highly detailed, and exceptionally well-formatted GitHub README.md section by section. Do NOT include the top-level badges, ASCII art title, Table of Contents, or the final footer/badges, as these are provided in the template.

Â  Â  Â  Â  Â  Â  Â  Â  **Crucially, adopt the exact style, tone, and level of detail of the 'Space Invaders' README example you were previously shown.** This includes:
Â  Â  Â  Â  Â  Â  Â  Â  - Â  **Strict adherence to the 'Praximous Branding Codex': MODULARITY IS MYTHOS // GLYPH IS IDENTITY // DESIGN IS RITUAL.**
Â  Â  Â  Â  Â  Â  Â  Â  - Â  **Incorporating a retro-terminal aesthetic, neon/gold/void colors conceptually in descriptions.**
Â  Â  Â  Â  Â  Â  Â  Â  - Â  **Reflecting the brand voice of James The Giblet's 'Mythic Builder Portal' using evocative terminology (e.g., "glyph," "ritual," "mythos," "void," "neon," "conclave," "portal").**
Â  Â  Â  Â  Â  Â  Â  Â  - Â  **Expanding significantly on each section with elaborate explanations, practical examples, and clear step-by-step instructions. Include example code blocks where appropriate (e.g., for project structure, installation, usage).**
Â  Â  Â  Â  Â  Â  Â  Â  - Â  **Ensuring the tone is professional, clear, and engaging.**

Â  Â  Â  Â  Â  Â  Â  Â  Generate content for the following sections, using the exact Markdown headings provided:

Â  Â  Â  Â  Â  Â  Â  Â  ## 1. Project Overwrite // Glyph Genesis
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Describe the project, its purpose, and key features.
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Integrate brand keywords and aesthetic descriptions.

Â  Â  Â  Â  Â  Â  Â  Â  ## 2. Architect's Mandate // Core Configuration
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Detail the programming language/stack.
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Explain operating system compatibility.
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Describe recommended development tools/IDEs and why they are recommended.

Â  Â  Â  Â  Â  Â  Â  Â  ## 3. Ritual of Summoning // Installation Protocol
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Provide highly detailed, step-by-step installation instructions with exact commands.
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Include prerequisites and virtual environment setup.

Â  Â  Â  Â  Â  Â  Â  Â  ## 4. Ignition Sequence // Operational Rites
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Provide clear usage instructions, including how to run the project and controls/inputs.
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Describe the in-game experience.

Â  Â  Â  Â  Â  Â  Â  Â  ## 5. Codex of Structure // Praximous Manifest
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Describe the main directories and files in the project's structure and their purpose.
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Provide an example directory tree and explanations for key components, similar to the 'Space Invaders' example.

Â  Â  Â  Â  Â  Â  Â  Â  ## 6. The Conclave of Builders // Contribution Protocol
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Outline guidelines for contributing, or state if contributions are not currently accepted, using branded language.

Â  Â  Â  Â  Â  Â  Â  Â  ## 7. Oathbound Accords // Licensing Mandate
Â  Â  Â  Â  Â  Â  Â  Â  - Â  Explain the project's license in detail, using branded language.

Â  Â  Â  Â  Â  Â  Â  Â  Here are the project details to use for generating the content:

Project Title: ${collectedAnswers.projectTitle || 'N/A'}
Project Status: ${collectedAnswers.projectStatus || 'N/A'}
Project Description: ${collectedAnswers.projectDescription || 'N/A'}
Brand Keywords/Themes: ${collectedAnswers.brandKeywords || 'N/A'}
Programming Language/Stack: ${collectedAnswers.programmingLanguage || 'N/A'}
Operating System Compatibility: ${collectedAnswers.operatingSystem || 'N/A'}
Recommended Development Tools/IDEs: ${collectedAnswers.developmentTools || 'N/A'}
Project Structure Details: ${collectedAnswers.projectStructure || 'N/A'}
Installation Steps: ${collectedAnswers.installationSteps || 'N/A'}
Usage Instructions: ${collectedAnswers.usageInstructions || 'N/A'}
Contributing Guidelines: ${collectedAnswers.contributingGuidelines || 'N/A'}
License Information: ${collectedAnswers.licenseInfo || 'N/A'}
Additional Information/Emphasis: ${collectedAnswers.additionalInfo || 'N/A'}
`;

Â  Â  Â  Â  Â  Â  Â  Â  if (prompt.length < 50) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("Please provide more details. The prompt is too short to generate a meaningful README.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("I need more information to generate a good README. Can you elaborate on your project?", 'ai', conversationQuestions.length);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isGenerating = false;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateButtonStates();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadingIndicator.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  console.log("Generated Prompt:", prompt);

Â  Â  Â  Â  Â  Â  Â  Â  let chatHistory = [];
Â  Â  Â  Â  Â  Â  Â  Â  chatHistory.push({ role: "user", parts: [{ text: prompt }] });

Â  Â  Â  Â  Â  Â  Â  Â  const payload = { contents: chatHistory };
Â  Â  Â  Â  Â  Â  Â  Â  const apiKey = "YOUR_GEMINI_API_KEY_HERE";
Â  Â  Â  Â  Â  Â  Â  Â  const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetchWithExponentialBackoff(apiUrl, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify(payload)
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  const result = await response.json();

Â  Â  Â  Â  Â  Â  Â  Â  if (result.candidates && result.candidates.length > 0 &&
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result.candidates[0].content && result.candidates[0].content.parts &&
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  result.candidates[0].content.parts.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const generatedContent = result.candidates[0].content.parts[0].text;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Combine static header, generated content, and static footer
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generatedReadmeContent.textContent = headerMarkdown + generatedContent + footerMarkdown;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generatedReadmeContainer.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("Your README has been generated!", 'ai', conversationQuestions.length);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("Failed to generate README. Unexpected API response structure.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error("Unexpected API response structure:", result);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("I encountered an issue generating the README. Please try again.", 'ai', conversationQuestions.length);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox(`Error generating README: ${error.message}. Please try again.`);
Â  Â  Â  Â  Â  Â  Â  Â  console.error("Error during README generation:", error);
Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("I encountered an error. Please try again.", 'ai', conversationQuestions.length);
Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  loadingIndicator.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  isGenerating = false;
Â  Â  Â  Â  Â  Â  Â  Â  updateButtonStates();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Function to download the generated README
Â  Â  Â  Â  function downloadReadme() {
Â  Â  Â  Â  Â  Â  const readmeContent = generatedReadmeContent.textContent;
Â  Â  Â  Â  Â  Â  if (readmeContent) {
Â  Â  Â  Â  Â  Â  Â  Â  const blob = new Blob([readmeContent], { type: "text/markdown" });
Â  Â  Â  Â  Â  Â  Â  Â  const url = URL.createObjectURL(blob);
Â  Â  Â  Â  Â  Â  Â  Â  const a = document.createElement("a");
Â  Â  Â  Â  Â  Â  Â  Â  a.href = url;
Â  Â  Â  Â  Â  Â  Â  Â  // Use the project title or a generic name for the download file
Â  Â  Â  Â  Â  Â  Â  Â  const fileName = (collectedAnswers.projectTitle ? collectedAnswers.projectTitle.toLowerCase().replace(/\s/g, '-') : 'readme') + '.md';
Â  Â  Â  Â  Â  Â  Â  Â  a.download = fileName;
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(a); // Required for Firefox
Â  Â  Â  Â  Â  Â  Â  Â  a.click();
Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(a); // Clean up
Â  Â  Â  Â  Â  Â  Â  Â  URL.revokeObjectURL(url);
Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("README downloaded successfully!");
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("No README content to download.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Event listener for sending messages
Â  Â  Â  Â  sendButton.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const message = userInput.value.trim();
Â  Â  Â  Â  Â  Â  if (message && !isGenerating) {
Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat(message, 'user', currentQuestionIndex);
Â  Â  Â  Â  Â  Â  Â  Â  collectedAnswers[conversationQuestions[currentQuestionIndex].key] = message;
Â  Â  Â  Â  Â  Â  Â  Â  // Save progress to localStorage
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('collectedAnswers', JSON.stringify(collectedAnswers));
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('currentQuestionIndex', currentQuestionIndex + 1);

Â  Â  Â  Â  Â  Â  Â  Â  userInput.value = '';
Â  Â  Â  Â  Â  Â  Â  Â  currentQuestionIndex++;
Â  Â  Â  Â  Â  Â  Â  Â  askNextQuestion();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Allow sending message with Enter key
Â  Â  Â  Â  userInput.addEventListener('keypress', (event) => {
Â  Â  Â  Â  Â  Â  if (event.key === 'Enter') {
Â  Â  Â  Â  Â  Â  Â  Â  sendButton.click();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Event listener for Back button
Â  Â  Â  Â  backButton.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  if (currentQuestionIndex > 0 && !isGenerating) {
Â  Â  Â  Â  Â  Â  Â  Â  currentQuestionIndex--;
Â  Â  Â  Â  Â  Â  Â  Â  // Remove the last two messages (user and AI)
Â  Â  Â  Â  Â  Â  Â  Â  const lastMessages = chatWindow.querySelectorAll(`[data-question-index="${currentQuestionIndex}"]`);
Â  Â  Â  Â  Â  Â  Â  Â  lastMessages.forEach(msg => msg.remove());

Â  Â  Â  Â  Â  Â  Â  Â  const lastQuestionKey = conversationQuestions[currentQuestionIndex].key;
Â  Â  Â  Â  Â  Â  Â  Â  delete collectedAnswers[lastQuestionKey];
Â  Â  Â  Â  Â  Â  Â  Â  // Update localStorage
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('collectedAnswers', JSON.stringify(collectedAnswers));
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.setItem('currentQuestionIndex', currentQuestionIndex);

Â  Â  Â  Â  Â  Â  Â  Â  generatedReadmeContainer.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  generatedReadmeContent.textContent = '';

Â  Â  Â  Â  Â  Â  Â  Â  askNextQuestion();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Event listener for Redo button
Â  Â  Â  Â  redoButton.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  if (!isGenerating) {
Â  Â  Â  Â  Â  Â  Â  Â  currentQuestionIndex = 0;
Â  Â  Â  Â  Â  Â  Â  Â  collectedAnswers = {};
Â  Â  Â  Â  Â  Â  Â  Â  chatWindow.innerHTML = ''; // Clear chat history
Â  Â  Â  Â  Â  Â  Â  Â  generatedReadmeContainer.classList.add('hidden');
Â  Â  Â  Â  Â  Â  Â  Â  generatedReadmeContent.textContent = '';
Â  Â  Â  Â  Â  Â  Â  Â  // Clear localStorage
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.removeItem('collectedAnswers');
Â  Â  Â  Â  Â  Â  Â  Â  localStorage.removeItem('currentQuestionIndex');

Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("Conversation restarted. Let's begin again!", 'ai', -1);
Â  Â  Â  Â  Â  Â  Â  Â  // Rebuild the progress ritual
Â  Â  Â  Â  Â  Â  Â  Â  initializeProgressRitual();
Â  Â  Â  Â  Â  Â  Â  Â  askNextQuestion();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // Event listener for copy button
Â  Â  Â  Â  copyButton.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const textToCopy = generatedReadmeContent.textContent;
Â  Â  Â  Â  Â  Â  if (textToCopy) {
Â  Â  Â  Â  Â  Â  Â  Â  const textarea = document.createElement('textarea');
Â  Â  Â  Â  Â  Â  Â  Â  textarea.value = textToCopy;
Â  Â  Â  Â  Â  Â  Â  Â  textarea.style.position = 'fixed';
Â  Â  Â  Â  Â  Â  Â  Â  textarea.style.left = '-9999px';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(textarea);
Â  Â  Â  Â  Â  Â  Â  Â  textarea.select();
Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.execCommand('copy');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("README copied to clipboard!");
Â  Â  Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Failed to copy text:', err);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("Failed to copy README. Please copy manually.");
Â  Â  Â  Â  Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.removeChild(textarea);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showMessageBox("No README content to copy.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });

Â  Â  Â  Â  // NEW: Event listener for download button
Â  Â  Â  Â  downloadButton.addEventListener('click', downloadReadme);

Â  Â  Â  Â  // NEW: Function to initialize the progress ritual with sigils
Â  Â  Â  Â  function initializeProgressRitual() {
Â  Â  Â  Â  Â  Â  progressRitual.innerHTML = '';
Â  Â  Â  Â  Â  Â  for (let i = 0; i < conversationQuestions.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const sigil = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  sigil.classList.add('sigil');
Â  Â  Â  Â  Â  Â  Â  Â  progressRitual.appendChild(sigil);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // Initial message from AI when the page loads
Â  Â  Â  Â  window.onload = () => {
Â  Â  Â  Â  Â  Â  initializeProgressRitual();
Â  Â  Â  Â  Â  Â  // Load progress from localStorage
Â  Â  Â  Â  Â  Â  const savedAnswers = localStorage.getItem('collectedAnswers');
Â  Â  Â  Â  Â  Â  const savedIndex = localStorage.getItem('currentQuestionIndex');

Â  Â  Â  Â  Â  Â  if (savedAnswers && savedIndex !== null) {
Â  Â  Â  Â  Â  Â  Â  Â  collectedAnswers = JSON.parse(savedAnswers);
Â  Â  Â  Â  Â  Â  Â  Â  currentQuestionIndex = parseInt(savedIndex, 10);

Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("Welcome back! Resuming our conversation...", 'ai', -1);
Â  Â  Â  Â  Â  Â  Â  Â  // Rebuild chat history from saved answers
Â  Â  Â  Â  Â  Â  Â  Â  for(let i = 0; i < currentQuestionIndex; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat(conversationQuestions[i].prompt, 'ai', i);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat(collectedAnswers[conversationQuestions[i].key], 'user', i);
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // If all questions were answered, try to generate README again
Â  Â  Â  Â  Â  Â  Â  Â  if (currentQuestionIndex >= conversationQuestions.length) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  generateReadmeFromAnswers();
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  askNextQuestion();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  addMessageToChat("Welcome to the Mythic Builder Portal's README Generator! I'll ask you a few questions to gather the necessary information for your README. Let's begin!", 'ai', -1);
Â  Â  Â  Â  Â  Â  Â  Â  askNextQuestion();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateButtonStates(); // Set initial button states
Â  Â  Â  Â  };
Â  Â  </script>
</body>
</html>